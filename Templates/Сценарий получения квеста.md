---
tags:
  - —Å—Ü–µ–Ω–∞—Ä–∏–π
location: "[[Mastery Node]]"
wealth: 100
requiredOutcomes:
  - "[[Mastery Node]]"
opened: false
---
```dataviewjs
const trackpage = dv.page("–¢—Ä–µ–∫–µ—Ä –∫–≤–µ—Å—Ç–æ–≤");
function ga(page) {
    let results = [];

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å –±–æ–≥–∞—Ç—Å—Ç–≤–∞
    const wealthMet = dv.compare(trackpage.wealth, page.wealth) >= 0 || page.wealth == null;
    if (!wealthMet) {
        results.push(`–ú–∞–ª—ã–π —É—Ä–æ–≤–µ–Ω—å –±–æ–≥–∞—Ç—Å–≤–∞. –°–µ–π—á–∞—Å ${trackpage.wealth}, –Ω—É–∂–Ω–æ ${page.wealth}`);
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ª–æ–∫–∞—Ü–∏–∏
    const locationMet = dv.equal(trackpage.location, page.location) || page.location == null;
    if (!locationMet) {
        results.push(`–ù–µ –≤ —Ç–æ–º –º–µ—Å—Ç–µ. –°–µ–π—á–∞—Å ${trackpage.location}, –Ω—É–∂–Ω–æ ${page.location}`);
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π –æ—Ç–Ω–æ—à–µ–Ω–∏–π
    const relationConditionsMet = Object.keys(page.file.frontmatter)
        .filter(key => key.startsWith('rl.') ||  key.startsWith('nrl.'))
        .every(key => {
	        if(key.startsWith('rl.'))
	        {
				const character = key.replace('rl.', '');
	            const requiredStatus = page.file.frontmatter[key].toString().replace('[[', '').replace(']]',''); 
	            // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –æ—Ç–Ω–æ—à–µ–Ω–∏–π –∏–∑ —Ñ–∞–π–ª–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
	            const characterPage = dv.page(character);
	            if (!characterPage || !characterPage.relationships) {
	                results.push(`[[${character}]] - –¥–∞–Ω–Ω—ã–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç`);
	                return false;
	            }
	            
	            const currentStatus = characterPage.file.frontmatter["relationships"].toString().replace('[[', '').replace(']]','');
	            if (currentStatus != requiredStatus) {
	                results.push(`[[${character}]] - —Å–µ–π—á–∞—Å —Å –≤–∞–º–∏ [[${currentStatus}]], –Ω—É–∂–Ω–æ [[${requiredStatus}]]`);
	                return false;
	            }
	        } 
	        else 
	        {
		        const character = key.replace('nrl.', '');
	            const requiredStatus = page.file.frontmatter[key].toString().replace('[[', '').replace(']]','');   
	            // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –æ—Ç–Ω–æ—à–µ–Ω–∏–π –∏–∑ —Ñ–∞–π–ª–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
	            const characterPage = dv.page(character);
	            if (!characterPage || !characterPage.relationships) {
	                results.push(`[[${character}]] - –¥–∞–Ω–Ω—ã–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç`);
	                return false;
	            }
	            
				const currentStatus = characterPage.file.frontmatter["relationships"].toString().replace('[[', '').replace(']]','');
	            if (currentStatus == requiredStatus) {
	                results.push(`[[${character}]] - —Å–µ–π—á–∞—Å —Å –≤–∞–º–∏ [[${currentStatus}]], –Ω—É–∂–Ω–æ –ù–ï [[${requiredStatus}]]`);
	                return false;
	            }
	        }
            

            return true;
        });
        const outcomesMet = page.requiredOutcomes && page.requiredOutcomes.filter(r => {
        if(dv.page(r)?.outcomeStatus === true){
	        return true;
        }  else {
			results.push(`–ù—É–∂–µ–Ω –∏—Å—Ö–æ–¥ ${r}`); return false;
	    }}).length === page.requiredOutcomes.length;

    return results;
}
dv.table(["–°—Ü–µ–Ω–∞—Ä–∏–π", "–°—Ç–∞—Ç—É—Å", "–ü—Ä–æ–±–ª–µ–º—ã",  "–î–æ—Å—Ç—É–ø"], [[
	dv.fileLink(dv.current().file.name),
	dv.current().opened == false ? '–ù–µ –∏—Å–ø–æ–ª–Ω–µ–Ω' : '–ò—Å–ø–æ–ª–Ω–µ–Ω',
	ga(dv.current()),
	// –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –∫–≤–µ—Å—Ç–∞
	ga(dv.current()).length === 0 ? "üü¢ –û—Ç–∫—Ä—ã—Ç" : "üî¥ –ó–∞–∫—Ä—ã—Ç"]]
);
```
